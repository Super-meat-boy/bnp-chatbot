{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\choko\\\\Projects\\\\bnp chatbot\\\\src\\\\components\\\\chatbot\\\\BnpChatbot.js\";\nimport React from \"react\";\nimport ChatBot from \"react-simple-chatbot\";\nimport moment from \"moment\";\nimport { ThemeProvider } from 'styled-components';\n\nfunction checkDateValidity(value) {\n  const dateEntered = value;\n\n  if (moment(dateEntered, \"DD.MM.YYYY\", true).isValid() && moment(dateEntered, \"DD.MM.YYYY\", true) < moment.now()) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction calculateAge(birthday) {\n  // birthday is a date\n  const today = new Date();\n  const birthDate = new Date(birthday);\n  let age = today.getFullYear() - birthDate.getFullYear();\n  let m = today.getMonth() - birthDate.getMonth();\n\n  if (m < 0 || m === 0 && today.getDate() < birthDate.getDate()) {\n    age--;\n    console.log(age);\n    return age;\n  }\n}\n\nexport default class BnpChatbot extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleEnd = this.handleEnd.bind(this);\n    this.state = {};\n  }\n\n  Greeting(props) {\n    const chatEnded = props.chatEnded;\n\n    if (chatEnded) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      }, \"conversation termin\\xE9e\");\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }, \"conversation non terminado\");\n  }\n\n  handleEnd({\n    steps,\n    values\n  }) {\n    this.state.gender = \"\".concat(values[0]);\n    this.state.name = \"\".concat(values[1]);\n    this.state.birth = \"\".concat(values[2]);\n    console.log(this.state.name);\n    console.log(this.state.gender);\n    console.log(this.state.birth);\n    this.props.chatEnded = true;\n  }\n\n  render() {\n    const config = {\n      width: \"300px\",\n      height: \"400px\",\n      floating: true\n    };\n    const image = {\n      url: \"https://static-s.aa-cdn.net/img/gp/20600007729968/FTzKM268-gY1wMf2z9071oktm-jTLAHh-_wTKmyev1eMEQnGQZPQgDec_KyvKjJGwF9H=w300\"\n    };\n    const theme = {\n      background: '#f5f8fb',\n      fontFamily: 'arial',\n      headerBgColor: '#6c757d',\n      headerFontColor: '#fff',\n      headerFontSize: '15px',\n      botBubbleColor: '#6c757d',\n      botFontColor: '#fff',\n      userBubbleColor: '#10912c',\n      userFontColor: '#fff'\n    };\n    const steps = [{\n      id: \"Greet\",\n      message: \"Hello, Welcome to our BNP Chatbot\",\n      trigger: \"Ask Gender\"\n    }, {\n      id: \"Ask Gender\",\n      message: \"Êtes-vous un homme ou une femme ?\",\n      trigger: \"gender\"\n    }, {\n      id: \"gender\",\n      options: [{\n        value: \"Homme\",\n        label: \"Homme\",\n        trigger: \"Ask Name\"\n      }, {\n        value: \"Femme\",\n        label: \"Femme\",\n        trigger: \"Ask Name\"\n      }]\n    }, {\n      id: \"Ask Name\",\n      message: \"Merci, quel est votre prénom\",\n      trigger: \"name\"\n    }, {\n      id: \"name\",\n      user: true,\n      trigger: \"Personalize Greetings\"\n    }, {\n      id: \"Personalize Greetings\",\n      message: \"Enchanté {previousValue}, Joli prénom\",\n      trigger: \"Asking for birthdate\"\n    }, {\n      id: \"Asking for birthdate\",\n      message: \"Quelle est votre date de naissance ?\",\n      trigger: \"Waiting for birthdate input\"\n    }, {\n      id: \"Waiting for birthdate input\",\n      placeholder: \"format dd.mm.yyyy souhaité\",\n      user: true,\n      validator: value => {\n        if (checkDateValidity(value)) {\n          this.state.age = calculateAge(value);\n\n          if (this.state.age >= 18) {\n            this.state.majeur = true;\n            console.log('is it majeur : ' + this.state.majeur);\n          } else {\n            this.state.majeur = false;\n            console.log('is it majeur : ' + this.state.majeur);\n          }\n\n          return true;\n        }\n\n        return 'invalid date';\n      },\n      trigger: 'recap'\n    }, {\n      id: 'recap',\n      message: \"Merci {state.gender} {state.name}, vous êtes ({this.state.majeur} ? \\\"majeur\\\":\\\"mineur\\\")} \",\n      trigger: 'Done'\n    }, {\n      id: 'Done',\n      message: 'Ciao',\n      end: true\n    }];\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(ThemeProvider, {\n      theme: theme,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(ChatBot, Object.assign({\n      steps: steps\n    }, config, {\n      handleEnd: this.handleEnd,\n      botAvatar: image.url,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }))), \"this.Greeting();\");\n  }\n\n} // if (calculateAge(value)) {\n//     console.log('majeur');\n//     return true;\n// }\n// console.log('mineur');\n// return 'mineur';\n// validator: (value) => {\n//\n//     if (checkDateValidity(value)) {\n//         return true;\n//     }\n//     return 'invalid date'\n//\n//\n// },","map":{"version":3,"sources":["C:\\Users\\choko\\Projects\\bnp chatbot\\src\\components\\chatbot\\BnpChatbot.js"],"names":["React","ChatBot","moment","ThemeProvider","checkDateValidity","value","dateEntered","isValid","now","calculateAge","birthday","today","Date","birthDate","age","getFullYear","m","getMonth","getDate","console","log","BnpChatbot","Component","constructor","props","handleEnd","bind","state","Greeting","chatEnded","steps","values","gender","name","birth","render","config","width","height","floating","image","url","theme","background","fontFamily","headerBgColor","headerFontColor","headerFontSize","botBubbleColor","botFontColor","userBubbleColor","userFontColor","id","message","trigger","options","label","user","placeholder","validator","majeur","end"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport ChatBot from \"react-simple-chatbot\";\r\nimport moment from \"moment\";\r\nimport {ThemeProvider} from 'styled-components';\r\n\r\n\r\nfunction checkDateValidity(value) {\r\n    const dateEntered = value;\r\n    if (moment(dateEntered, \"DD.MM.YYYY\", true).isValid() && (moment(dateEntered, \"DD.MM.YYYY\", true) < moment.now())) {\r\n        return true\r\n    } else {\r\n        return false\r\n    }\r\n}\r\n\r\nfunction calculateAge(birthday) { // birthday is a date\r\n\r\n    const today = new Date();\r\n    const birthDate = new Date(birthday);\r\n    let age = today.getFullYear() - birthDate.getFullYear();\r\n    let m = today.getMonth() - birthDate.getMonth();\r\n    if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {\r\n        age--;\r\n        console.log(age);\r\n        return age;\r\n    }\r\n}\r\n\r\nexport default class BnpChatbot extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleEnd = this.handleEnd.bind(this);\r\n        this.state = {};\r\n    }\r\n\r\n    Greeting(props) {\r\n        const chatEnded = props.chatEnded;\r\n        if (chatEnded) {\r\n            return <div>conversation terminée</div>\r\n        }\r\n        return <div>conversation non terminado</div>\r\n    }\r\n\r\n\r\n    handleEnd({steps, values}) {\r\n\r\n        this.state.gender = `${values[0]}`;\r\n        this.state.name = `${values[1]}`;\r\n        this.state.birth = `${values[2]}`;\r\n        console.log(this.state.name);\r\n        console.log(this.state.gender);\r\n        console.log(this.state.birth);\r\n        this.props.chatEnded = true\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        const config = {\r\n            width: \"300px\",\r\n            height: \"400px\",\r\n            floating: true\r\n        };\r\n\r\n        const image = {url: \"https://static-s.aa-cdn.net/img/gp/20600007729968/FTzKM268-gY1wMf2z9071oktm-jTLAHh-_wTKmyev1eMEQnGQZPQgDec_KyvKjJGwF9H=w300\"};\r\n\r\n        const theme = {\r\n            background: '#f5f8fb',\r\n            fontFamily: 'arial',\r\n            headerBgColor: '#6c757d',\r\n            headerFontColor: '#fff',\r\n            headerFontSize: '15px',\r\n            botBubbleColor: '#6c757d',\r\n            botFontColor: '#fff',\r\n            userBubbleColor: '#10912c',\r\n            userFontColor: '#fff',\r\n        };\r\n\r\n\r\n        const steps = [\r\n                {\r\n                    id: \"Greet\",\r\n                    message: \"Hello, Welcome to our BNP Chatbot\",\r\n                    trigger: \"Ask Gender\"\r\n                },\r\n                {\r\n                    id: \"Ask Gender\",\r\n                    message: \"Êtes-vous un homme ou une femme ?\",\r\n                    trigger: \"gender\"\r\n                },\r\n                {\r\n                    id: \"gender\",\r\n                    options: [\r\n                        {value: \"Homme\", label: \"Homme\", trigger: \"Ask Name\"},\r\n                        {value: \"Femme\", label: \"Femme\", trigger: \"Ask Name\"}\r\n                    ]\r\n                },\r\n                {\r\n                    id: \"Ask Name\",\r\n                    message: \"Merci, quel est votre prénom\",\r\n                    trigger: \"name\"\r\n                },\r\n                {\r\n                    id: \"name\",\r\n                    user: true,\r\n                    trigger: \"Personalize Greetings\"\r\n                },\r\n                {\r\n                    id: \"Personalize Greetings\",\r\n                    message: \"Enchanté {previousValue}, Joli prénom\",\r\n                    trigger: \"Asking for birthdate\"\r\n                },\r\n                {\r\n                    id: \"Asking for birthdate\",\r\n                    message: \"Quelle est votre date de naissance ?\",\r\n                    trigger: \"Waiting for birthdate input\"\r\n                },\r\n\r\n                {\r\n                    id: \"Waiting for birthdate input\",\r\n                    placeholder: \"format dd.mm.yyyy souhaité\",\r\n                    user: true,\r\n\r\n                    validator: (value) => {\r\n\r\n                        if (checkDateValidity(value)) {\r\n                            this.state.age = calculateAge(value);\r\n                            if (this.state.age >= 18) {\r\n                                this.state.majeur = true;\r\n                                console.log('is it majeur : ' + this.state.majeur)\r\n                            } else {\r\n                                this.state.majeur = false;\r\n                                console.log('is it majeur : ' + this.state.majeur)\r\n                            }\r\n                            return true;\r\n                        }\r\n                        return 'invalid date';\r\n                    },\r\n\r\n                    trigger: 'recap',\r\n                },\r\n\r\n                {\r\n                    id: 'recap',\r\n                    message: \"Merci {state.gender} {state.name}, vous êtes ({this.state.majeur} ? \\\"majeur\\\":\\\"mineur\\\")} \",\r\n                    trigger: 'Done'\r\n\r\n                },\r\n\r\n                {\r\n                    id: 'Done',\r\n                    message: 'Ciao',\r\n                    end: true,\r\n                },\r\n\r\n            ]\r\n        ;\r\n\r\n\r\n        return <div>\r\n            <ThemeProvider theme={theme}>\r\n                <ChatBot steps={steps} {...config} handleEnd={this.handleEnd} botAvatar={image.url}/>\r\n            </ThemeProvider>\r\n            this.Greeting();\r\n        </div>\r\n\r\n    }\r\n}\r\n\r\n\r\n// if (calculateAge(value)) {\r\n//     console.log('majeur');\r\n//     return true;\r\n// }\r\n// console.log('mineur');\r\n// return 'mineur';\r\n\r\n\r\n// validator: (value) => {\r\n//\r\n//     if (checkDateValidity(value)) {\r\n//         return true;\r\n//     }\r\n//     return 'invalid date'\r\n//\r\n//\r\n// },\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}